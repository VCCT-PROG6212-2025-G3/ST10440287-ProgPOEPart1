@model ProgPOE.Models.DashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-md-12">
        <h2>📊 @Model.UserRole Dashboard</h2>
        <p class="text-muted">Welcome back, @Model.UserName! Here's an overview of your claims activity.</p>
    </div>
</div>

<!-- Statistics Cards -->
<div class="row">
    <div class="col-md-3">
        <div class="card card-stat card-total">
            <div class="card-body">
                <h5 class="card-title">📊 Total Claims</h5>
                <h3 class="card-text text-primary">@Model.TotalClaims</h3>
                <small class="text-muted">All time</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-stat card-pending">
            <div class="card-body">
                <h5 class="card-title">⏳ Pending</h5>
                <h3 class="card-text text-warning">@Model.PendingClaims</h3>
                <small class="text-muted">Awaiting approval</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-stat card-approved">
            <div class="card-body">
                <h5 class="card-title">✅ Approved</h5>
                <h3 class="card-text text-success">@Model.ApprovedClaims</h3>
                <small class="text-muted">Successfully processed</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-stat card-rejected">
            <div class="card-body">
                <h5 class="card-title">💰 Total Earnings</h5>
                <h3 class="card-text text-success">@Model.FormattedEarnings</h3>
                <small class="text-muted">Approved claims</small>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>🚀 Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    @if (Model.UserRole == "Lecturer")
                    {
                        <div class="col-md-3">
                            <a href="@Url.Action("SubmitClaim", "Home")" class="btn btn-primary btn-lg w-100 mb-2">
                                📝 Submit New Claim
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("MyClaims", "Home")" class="btn btn-info btn-lg w-100 mb-2">
                                📋 View My Claims
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("MyClaims", "Home")" class="btn btn-success btn-lg w-100 mb-2">
                                📊 Track Status
                            </a>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-secondary btn-lg w-100 mb-2" onclick="showHelp()">
                                ❓ Help
                            </button>
                        </div>
                    }
                    else if (Model.UserRole == "ProgrammeCoordinator")
                    {
                        <div class="col-md-3">
                            <a href="@Url.Action("ApproveClaims", "Home")" class="btn btn-warning btn-lg w-100 mb-2">
                                ✅ Review Claims
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("MyClaims", "Home")" class="btn btn-info btn-lg w-100 mb-2">
                                📋 View All Claims
                            </a>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-success btn-lg w-100 mb-2" onclick="showStatistics()">
                                📊 View Statistics
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-secondary btn-lg w-100 mb-2" onclick="showHelp()">
                                ❓ Help
                            </button>
                        </div>
                    }
                    else if (Model.UserRole == "AcademicManager")
                    {
                        <div class="col-md-3">
                            <a href="@Url.Action("ApproveClaims", "Home")" class="btn btn-warning btn-lg w-100 mb-2">
                                ✅ Review Claims
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("MyClaims", "Home")" class="btn btn-info btn-lg w-100 mb-2">
                                📋 View All Claims
                            </a>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-success btn-lg w-100 mb-2" onclick="showStatistics()">
                                📊 View Statistics
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-secondary btn-lg w-100 mb-2" onclick="showHelp()">
                                ❓ Help
                            </button>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>📈 System Overview</h5>
            </div>
            <div class="card-body">
                @if (Model.UserRole == "Lecturer")
                {
                    <div class="alert alert-info">
                        <h6><strong>📝 Getting Started</strong></h6>
                        <p class="mb-1">1. Click <strong>"Submit New Claim"</strong> to create your monthly claim</p>
                        <p class="mb-1">2. Upload supporting documents (timesheets, attendance records)</p>
                        <p class="mb-1">3. Track your claim status in <strong>"My Claims"</strong></p>
                        <p class="mb-0">4. Receive notifications when your claim is approved</p>
                    </div>
                }
                else if (Model.UserRole == "ProgrammeCoordinator")
                {
                    <div class="alert alert-warning">
                        <h6><strong>👤 Coordinator Responsibilities</strong></h6>
                        <p class="mb-1">1. Review pending claims submitted by lecturers</p>
                        <p class="mb-1">2. Verify hours worked and supporting documents</p>
                        <p class="mb-1">3. Approve claims to forward to Academic Manager</p>
                        <p class="mb-0">4. Reject or return claims that need revision</p>
                        <hr>
                        <p class="mb-0 text-center">
                            <strong>⏳ Pending Your Review: @Model.PendingClaims claim(s)</strong>
                        </p>
                    </div>
                }
                else if (Model.UserRole == "AcademicManager")
                {
                    <div class="alert alert-success">
                        <h6><strong>👔 Manager Responsibilities</strong></h6>
                        <p class="mb-1">1. Review claims approved by Programme Coordinators</p>
                        <p class="mb-1">2. Provide final approval for payment processing</p>
                        <p class="mb-1">3. Monitor overall claim statistics and trends</p>
                        <p class="mb-0">4. Ensure compliance with university policies</p>
                        <hr>
                        <p class="mb-0 text-center">
                            <strong>⏳ Pending Your Approval: @Model.PendingClaims claim(s)</strong>
                        </p>
                    </div>
                }

                <div class="row mt-3">
                    <div class="col-md-12">
                        <h6><strong>📊 Quick Stats Summary</strong></h6>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h4 class="text-primary">@Model.TotalClaims</h4>
                                        <small>Total Claims</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h4 class="text-warning">@Model.PendingClaims</h4>
                                        <small>Pending Review</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h4 class="text-success">@Model.ApprovedClaims</h4>
                                        <small>Approved</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h4 class="text-danger">@Model.RejectedClaims</h4>
                                        <small>Rejected</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function showStatistics() {
            alert('📊 System Statistics\n\n' +
                'Total Claims: @Model.TotalClaims\n' +
                'Pending: @Model.PendingClaims\n' +
                'Approved: @Model.ApprovedClaims\n' +
                'Rejected: @Model.RejectedClaims\n' +
                'Total Earnings: @Model.FormattedEarnings\n\n' +
                '⚠️ Detailed analytics coming soon!');
        }

        function showHelp() {
            var helpMessage = '';
            var userRole = '@Model.UserRole';

            if (userRole === 'Lecturer') {
                helpMessage = '❓ Lecturer Help Guide\n\n' +
                    '1. Submit Claims: Click "Submit New Claim" to create a new monthly claim\n' +
                    '2. Upload Documents: Attach timesheets and attendance records\n' +
                    '3. Track Status: Monitor your claim progress in "My Claims"\n' +
                    '4. View Details: Click on any claim to see full details and timeline\n\n' +
                    'Need more help? Contact your Programme Coordinator.';
            } else if (userRole === 'ProgrammeCoordinator') {
                helpMessage = '❓ Coordinator Help Guide\n\n' +
                    '1. Review Claims: Go to "Review Claims" to see pending submissions\n' +
                    '2. Verify Information: Check hours worked and supporting documents\n' +
                    '3. Approve/Reject: Make your decision with optional comments\n' +
                    '4. Track Progress: Monitor all claims in "View All Claims"\n\n' +
                    'Questions? Contact the Academic Manager.';
            } else if (userRole === 'AcademicManager') {
                helpMessage = '❓ Manager Help Guide\n\n' +
                    '1. Final Review: Review coordinator-approved claims\n' +
                    '2. Final Approval: Approve claims for payment processing\n' +
                    '3. Monitor System: View overall statistics and trends\n' +
                    '4. Manage Process: Ensure smooth workflow\n\n' +
                    'Need assistance? Contact IT Support.';
            }

            alert(helpMessage);
        }
    </script>
}